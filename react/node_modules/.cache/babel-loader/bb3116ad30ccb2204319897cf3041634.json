{"ast":null,"code":"import _defineProperty from\"/home/hadooop/Desktop/development/MERN/MernAuth/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/hadooop/Desktop/development/MERN/MernAuth/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/hadooop/Desktop/development/MERN/MernAuth/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from\"react\";import AuthService from\"./../services/AuthService\";import Message from\"./../component/Message\";var Register=function Register(props){var _useState=useState({username:\"\",password:\"\",role:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var timerID=useRef(null);useEffect(function(){return function(){clearTimeout(timerID);};},[]);var onChange=function onChange(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));//console.log({ user });\n};var resetForm=function resetForm(){setUser({username:\"\",password:\"\",role:\"\"});};var onSubmit=function onSubmit(e){e.preventDefault();AuthService.register(user).then(function(data){var message=data.message;setMessage(message);resetForm();if(!message.msgError){timerID=setTimeout(function(){props.history.push(\"/login\");},2000);}});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",onChange:onChange,name:\"username\",value:user.username,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",onChange:onChange,name:\"password\",value:user.password,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",onChange:onChange,name:\"role\",value:user.role,required:true}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-lg btn-success\"},\"Register\")),message?/*#__PURE__*/React.createElement(Message,{message:message}):null);};export default Register;","map":{"version":3,"sources":["/home/hadooop/Desktop/development/MERN/MernAuth/react/src/component/Register.jsx"],"names":["React","useState","useRef","useEffect","AuthService","Message","Register","props","username","password","role","user","setUser","message","setMessage","timerID","clearTimeout","onChange","e","target","name","value","resetForm","onSubmit","preventDefault","register","then","data","msgError","setTimeout","history","push"],"mappings":"qgBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,SAAlC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,eACFN,QAAQ,CAAC,CAAEO,QAAQ,CAAE,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,CAA8BC,IAAI,CAAE,EAApC,CAAD,CADN,wCACnBC,IADmB,eACbC,OADa,8BAEIX,QAAQ,CAAC,IAAD,CAFZ,yCAEnBY,OAFmB,eAEVC,UAFU,eAG1B,GAAIC,CAAAA,OAAO,CAAGb,MAAM,CAAC,IAAD,CAApB,CACAC,SAAS,CAAC,UAAM,CACd,MAAO,WAAM,CACXa,YAAY,CAACD,OAAD,CAAZ,CACD,CAFD,CAGD,CAJQ,CAIN,EAJM,CAAT,CAKA,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtBN,OAAO,gCAAMD,IAAN,wBAAaO,CAAC,CAACC,MAAF,CAASC,IAAtB,CAA6BF,CAAC,CAACC,MAAF,CAASE,KAAtC,GAAP,CACA;AACD,CAHD,CAKA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtBV,OAAO,CAAC,CAAEJ,QAAQ,CAAE,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,CAA8BC,IAAI,CAAE,EAApC,CAAD,CAAP,CACD,CAFD,CAGA,GAAMa,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACL,CAAD,CAAO,CACtBA,CAAC,CAACM,cAAF,GACApB,WAAW,CAACqB,QAAZ,CAAqBd,IAArB,EAA2Be,IAA3B,CAAgC,SAACC,IAAD,CAAU,IAChCd,CAAAA,OADgC,CACpBc,IADoB,CAChCd,OADgC,CAExCC,UAAU,CAACD,OAAD,CAAV,CACAS,SAAS,GACT,GAAI,CAACT,OAAO,CAACe,QAAb,CAAuB,CACrBb,OAAO,CAAGc,UAAU,CAAC,UAAM,CACzBtB,KAAK,CAACuB,OAAN,CAAcC,IAAd,CAAmB,QAAnB,EACD,CAFmB,CAEjB,IAFiB,CAApB,CAGD,CACF,CATD,EAUD,CAZD,CAaA,mBACE,4CACE,4BAAM,QAAQ,CAAER,QAAhB,eACE,6BACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,cAFZ,CAGE,QAAQ,CAAEN,QAHZ,CAIE,IAAI,CAAC,UAJP,CAKE,KAAK,CAAEN,IAAI,CAACH,QALd,CAME,QAAQ,KANV,EADF,cASE,6BACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,cAFZ,CAGE,QAAQ,CAAES,QAHZ,CAIE,IAAI,CAAC,UAJP,CAKE,KAAK,CAAEN,IAAI,CAACF,QALd,CAME,QAAQ,KANV,EATF,cAiBE,6BACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,cAFZ,CAGE,QAAQ,CAAEQ,QAHZ,CAIE,IAAI,CAAC,MAJP,CAKE,KAAK,CAAEN,IAAI,CAACD,IALd,CAME,QAAQ,KANV,EAjBF,cA0BE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,wBAAhC,aA1BF,CADF,CA+BGG,OAAO,cAAG,oBAAC,OAAD,EAAS,OAAO,CAAEA,OAAlB,EAAH,CAAmC,IA/B7C,CADF,CAmCD,CAjED,CAkEA,cAAeP,CAAAA,QAAf","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport AuthService from \"./../services/AuthService\";\nimport Message from \"./../component/Message\";\n\nconst Register = (props) => {\n  const [user, setUser] = useState({ username: \"\", password: \"\", role: \"\" });\n  const [message, setMessage] = useState(null);\n  let timerID = useRef(null);\n  useEffect(() => {\n    return () => {\n      clearTimeout(timerID);\n    };\n  }, []);\n  const onChange = (e) => {\n    setUser({ ...user, [e.target.name]: e.target.value });\n    //console.log({ user });\n  };\n\n  const resetForm = () => {\n    setUser({ username: \"\", password: \"\", role: \"\" });\n  };\n  const onSubmit = (e) => {\n    e.preventDefault();\n    AuthService.register(user).then((data) => {\n      const { message } = data;\n      setMessage(message);\n      resetForm();\n      if (!message.msgError) {\n        timerID = setTimeout(() => {\n          props.history.push(\"/login\");\n        }, 2000);\n      }\n    });\n  };\n  return (\n    <div>\n      <form onSubmit={onSubmit}>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          onChange={onChange}\n          name=\"username\"\n          value={user.username}\n          required\n        />\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          onChange={onChange}\n          name=\"password\"\n          value={user.password}\n          required\n        />\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          onChange={onChange}\n          name=\"role\"\n          value={user.role}\n          required\n        />\n\n        <button type=\"submit\" className=\"btn btn-lg btn-success\">\n          Register\n        </button>\n      </form>\n      {message ? <Message message={message} /> : null}\n    </div>\n  );\n};\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}