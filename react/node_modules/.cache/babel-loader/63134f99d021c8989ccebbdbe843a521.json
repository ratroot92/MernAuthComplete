{"ast":null,"code":"var _jsxFileName = \"/home/asd/Desktop/development/REACTJS/MernAuthComplete/react/src/component/Register.jsx\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers';\nimport * as yup from \"yup\";\nimport AuthService from \"./../services/AuthService\";\nimport Message from \"./../component/Message\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport ValidationService from './../services/ValidationService';\n/* Validation starts here */\n\nconst schema = yup.object().shape({\n  email: yup.string().required(function (value) {\n    toast.warning(\"Email is required\");\n  }).email(\"Invalid email\").test(\"Unique Email\", \"Email already in use\", function (value) {\n    console.log(value);\n    ValidationService.validateEmail(value).then(data => {\n      console.log(data.message);\n      const {\n        message\n      } = data;\n      toast.info(message.msgBody);\n    });\n  }),\n  password: yup.string(\"Password must be string \").required(function (value) {\n    toast.warning(\"Password is required\");\n  }).min(3, function (value) {\n    toast.warning(\"Password  must be atleast 3 charachters\");\n  }).max(32, function (value) {\n    toast.warning(\"Password  must atmost 32 chrachters\");\n  }),\n  c_password: yup.string().required(function (value) {\n    toast.warning(\"Confirm password is required\");\n  }).oneOf([yup.ref(\"password\"), null], function (value) {\n    toast.warning(\"Unmatched passwords\");\n  }),\n  username: yup.string(\"Username must be string \").required(function (value) {\n    toast.warning(\"Username is required \");\n  }).min(3, function (value) {\n    toast.warning(\"Username  must be atleast 3 charachters\");\n  }).max(32, function (value) {\n    toast.warning(\"Username  must atmost 32 chrachters\");\n  }) // .test(\"Unique username\", \"Username already in taken\", function (value) {\n  //   return new Promise((resolve, reject) => {\n  //     axios\n  //       .post(\"http://localhost:3001/api/users/verify/username\", {\n  //         username: value,\n  //       })\n  //       .then((res) => {\n  //         if (res.data.msg === \"Username already been taken\") {\n  //           toast.error(res.data.msg);\n  //           resolve(false);\n  //         }\n  //         resolve(true);\n  //       });\n  //   });\n  // }),\n\n});\n/* Validation ends here */\n\n/* Functional componennet starts here */\n\nconst Register = props => {\n  const {\n    register,\n    handleSubmit\n  } = useForm({\n    resolver: yupResolver(schema),\n    mode: 'onSubmit',\n    reValidateMode: 'onSubmit',\n    criteriaMode: \"firstError\",\n    shouldFocusError: true,\n    shouldUnregister: true,\n    defaultValues: {\n      username: \"\",\n      email: \"\",\n      mobile: \"\",\n      role: \"\",\n      password: \"\",\n      c_password: \"\"\n    }\n  });\n  const [user, setUser] = useState({\n    username: \"\",\n    password: \"\",\n    role: \"\"\n  });\n  const [message, setMessage] = useState(null);\n  let timerID = useRef(null);\n\n  const resetForm = () => {\n    setUser({\n      username: \"\",\n      password: \"\",\n      role: \"\"\n    });\n  };\n\n  const onSubmit = data => {\n    AuthService.register(user).then(data => {\n      const {\n        message\n      } = data;\n      setMessage(message);\n      resetForm();\n\n      if (!message.msgError) {\n        timerID = setTimeout(() => {\n          props.history.push(\"/login\");\n        }, 2000);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"username\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"email\",\n    type: \"email\",\n    ref: register,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"role\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"password\",\n    type: \"text\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"c_password\",\n    type: \"text\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"mobile\",\n    type: \"text\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Register;","map":{"version":3,"sources":["/home/asd/Desktop/development/REACTJS/MernAuthComplete/react/src/component/Register.jsx"],"names":["React","useState","useRef","useEffect","useForm","yupResolver","yup","AuthService","Message","ToastContainer","toast","ValidationService","schema","object","shape","email","string","required","value","warning","test","console","log","validateEmail","then","data","message","info","msgBody","password","min","max","c_password","oneOf","ref","username","Register","props","register","handleSubmit","resolver","mode","reValidateMode","criteriaMode","shouldFocusError","shouldUnregister","defaultValues","mobile","role","user","setUser","setMessage","timerID","resetForm","onSubmit","msgError","setTimeout","history","push"],"mappings":"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","sourcesContent":["import React ,{useState, useRef, useEffect}from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers';\nimport * as yup from \"yup\";\nimport AuthService from \"./../services/AuthService\";\nimport Message from \"./../component/Message\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport ValidationService from './../services/ValidationService'\n/* Validation starts here */\nconst schema = yup.object().shape({\n\n\n  email: yup\n    .string()\n    .required(function (value) {toast.warning(\"Email is required\")})\n    .email(\"Invalid email\")\n    .test(\"Unique Email\", \"Email already in use\", function (value) {\n      console.log(value)\n     ValidationService.validateEmail(value).then((data) => {\n       console.log(data.message)\n           const { message } = data;\n          toast.info(message.msgBody)\n         \n        });\n    }),\n\n  password: yup\n    .string(\"Password must be string \")\n    .required(function (value) {toast.warning(\"Password is required\")})\n    .min(3, function (value) {toast.warning(\"Password  must be atleast 3 charachters\")})\n    .max(32, function (value) {toast.warning(\"Password  must atmost 32 chrachters\")}),\n  c_password: yup\n    .string()\n    .required(function (value) {toast.warning(\"Confirm password is required\")})\n    .oneOf([yup.ref(\"password\"), null], function (value) {toast.warning(\"Unmatched passwords\");}),\n  \n\n  username: yup\n    .string(\"Username must be string \")\n    .required(function (value) {toast.warning(\"Username is required \")})\n    .min(3, function (value) {toast.warning(\"Username  must be atleast 3 charachters\")})\n    .max(32, function (value) {toast.warning(\"Username  must atmost 32 chrachters\");})\n    // .test(\"Unique username\", \"Username already in taken\", function (value) {\n    //   return new Promise((resolve, reject) => {\n    //     axios\n    //       .post(\"http://localhost:3001/api/users/verify/username\", {\n    //         username: value,\n    //       })\n    //       .then((res) => {\n    //         if (res.data.msg === \"Username already been taken\") {\n    //           toast.error(res.data.msg);\n    //           resolve(false);\n    //         }\n    //         resolve(true);\n    //       });\n    //   });\n    // }),\n});\n/* Validation ends here */\n/* Functional componennet starts here */\n\nconst Register = (props) => {\n  const { register, handleSubmit } = useForm({\n    resolver: yupResolver(schema),\n    mode: 'onSubmit',\n  reValidateMode: 'onSubmit',\n  criteriaMode: \"firstError\",\n  shouldFocusError: true,\n  shouldUnregister: true,\n    defaultValues: {\n      username: \"\",\n      email: \"\",\n      mobile: \"\",\n      role: \"\",\n      password:\"\",\n      c_password:\"\",\n    }\n  });\n\n  const [user, setUser] = useState({ username: \"\", password: \"\", role: \"\" });\n  const [message, setMessage] = useState(null);\n  let timerID = useRef(null);\n\n  const resetForm = () => {\n    setUser({ username: \"\", password: \"\", role: \"\" });\n  };\n\n\n  const onSubmit = data => {\n    AuthService.register(user).then((data) => {\n    const { message } = data;\n    setMessage(message);\n    resetForm();\n    if (!message.msgError) {\n      timerID = setTimeout(() => {\n        props.history.push(\"/login\");\n      }, 2000);\n    }\n  });}\n\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <input className=\"form-control\" name=\"username\" ref={register} />\n      <input className=\"form-control\" name=\"email\" type=\"email\" ref={register} required />\n      <input className=\"form-control\" name=\"role\" ref={register} />\n      <input className=\"form-control\" name=\"password\" type=\"text\" ref={register} />\n      <input className=\"form-control\" name=\"c_password\" type=\"text\" ref={register} />\n      <input className=\"form-control\" name=\"mobile\" type=\"text\" ref={register} />\n      <input className=\"form-control\" type=\"submit\" />\n      <ToastContainer />\n    </form>\n  );\n};\nexport default Register;"]},"metadata":{},"sourceType":"module"}