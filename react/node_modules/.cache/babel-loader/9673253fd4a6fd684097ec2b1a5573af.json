{"ast":null,"code":"import _defineProperty from\"/home/hadooop/Desktop/development/MERN/MernAuth/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/hadooop/Desktop/development/MERN/MernAuth/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/hadooop/Desktop/development/MERN/MernAuth/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import AuthService from\"./../services/AuthService\";import Message from\"./../component/Message\";import{AuthContext}from\"./../context/AuthContext\";var Login=function Login(props){var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var authContext=useContext(AuthContext);var onChange=function onChange(e){e.preventDefault();setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,[e.target.value])));//console.log({ user });\n};var onSubmit=function onSubmit(e){e.preventDefault();AuthService.login(user).then(function(data){var isAuthenticated=data.isAuthenticated,user=data.user,message=data.message;console.log(isAuthenticated,user,message);if(isAuthenticated){authContext.setUser(user);authContext.setIsAuthenticated(isAuthenticated);props.history.push(\"/todos\");console.log(\"isAuthenticated\");}else{setMessage(message);}});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",onChange:onChange,name:\"username\",required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",onChange:onChange,name:\"password\",required:true}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-lg btn-success\"},\"Login\")),message?/*#__PURE__*/React.createElement(Message,{message:message}):null);};export default Login;","map":{"version":3,"sources":["/home/hadooop/Desktop/development/MERN/MernAuth/react/src/component/Login.jsx"],"names":["React","useState","useContext","AuthService","Message","AuthContext","Login","props","username","password","user","setUser","message","setMessage","authContext","onChange","e","preventDefault","target","name","value","onSubmit","login","then","data","isAuthenticated","console","log","setIsAuthenticated","history","push"],"mappings":"qgBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,OAASC,WAAT,KAA4B,0BAA5B,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,eACCN,QAAQ,CAAC,CAAEO,QAAQ,CAAE,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,CAAD,CADT,wCAChBC,IADgB,eACVC,OADU,8BAEOV,QAAQ,CAAC,IAAD,CAFf,yCAEhBW,OAFgB,eAEPC,UAFO,eAGvB,GAAMC,CAAAA,WAAW,CAAGZ,UAAU,CAACG,WAAD,CAA9B,CAEA,GAAMU,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtBA,CAAC,CAACC,cAAF,GAEAN,OAAO,gCAAMD,IAAN,wBAAaM,CAAC,CAACE,MAAF,CAASC,IAAtB,CAA6B,CAACH,CAAC,CAACE,MAAF,CAASE,KAAV,CAA7B,GAAP,CACA;AACD,CALD,CAOA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACL,CAAD,CAAO,CACtBA,CAAC,CAACC,cAAF,GACAd,WAAW,CAACmB,KAAZ,CAAkBZ,IAAlB,EAAwBa,IAAxB,CAA6B,SAACC,IAAD,CAAU,IAC7BC,CAAAA,eAD6B,CACMD,IADN,CAC7BC,eAD6B,CACZf,IADY,CACMc,IADN,CACZd,IADY,CACNE,OADM,CACMY,IADN,CACNZ,OADM,CAErCc,OAAO,CAACC,GAAR,CAAYF,eAAZ,CAA6Bf,IAA7B,CAAmCE,OAAnC,EACA,GAAIa,eAAJ,CAAqB,CACnBX,WAAW,CAACH,OAAZ,CAAoBD,IAApB,EACAI,WAAW,CAACc,kBAAZ,CAA+BH,eAA/B,EACAlB,KAAK,CAACsB,OAAN,CAAcC,IAAd,CAAmB,QAAnB,EACAJ,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACD,CALD,IAKO,CACLd,UAAU,CAACD,OAAD,CAAV,CAED,CACF,CAZD,EAaD,CAfD,CAgBA,mBACE,4CACE,4BAAM,QAAQ,CAAES,QAAhB,eACE,6BACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,cAFZ,CAGE,QAAQ,CAAEN,QAHZ,CAIE,IAAI,CAAC,UAJP,CAKE,QAAQ,KALV,EADF,cAQE,6BACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,cAFZ,CAGE,QAAQ,CAAEA,QAHZ,CAIE,IAAI,CAAC,UAJP,CAKE,QAAQ,KALV,EARF,cAeE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,wBAAhC,UAfF,CADF,CAoBGH,OAAO,cAAG,oBAAC,OAAD,EAAS,OAAO,CAAEA,OAAlB,EAAH,CAAmC,IApB7C,CADF,CAwBD,CApDD,CAqDA,cAAeN,CAAAA,KAAf","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport AuthService from \"./../services/AuthService\";\nimport Message from \"./../component/Message\";\nimport { AuthContext } from \"./../context/AuthContext\";\n\nconst Login = (props) => {\n  const [user, setUser] = useState({ username: \"\", password: \"\" });\n  const [message, setMessage] = useState(null);\n  const authContext = useContext(AuthContext);\n\n  const onChange = (e) => {\n    e.preventDefault();\n\n    setUser({ ...user, [e.target.name]: [e.target.value] });\n    //console.log({ user });\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    AuthService.login(user).then((data) => {\n      const { isAuthenticated, user, message } = data;\n      console.log(isAuthenticated, user, message);\n      if (isAuthenticated) {\n        authContext.setUser(user);\n        authContext.setIsAuthenticated(isAuthenticated);\n        props.history.push(\"/todos\");\n        console.log(\"isAuthenticated\");\n      } else {\n        setMessage(message);\n\n      }\n    });\n  };\n  return (\n    <div>\n      <form onSubmit={onSubmit}>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          onChange={onChange}\n          name=\"username\"\n          required\n        />\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          onChange={onChange}\n          name=\"password\"\n          required\n        />\n        <button type=\"submit\" className=\"btn btn-lg btn-success\">\n          Login\n        </button>\n      </form>\n      {message ? <Message message={message} /> : null}\n    </div>\n  );\n};\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}